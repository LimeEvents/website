(function($) {	"use strict";		var body = $('body');	var doc = $(document);	var win	= $(window);	    /* Scroll-To Links */	$.fn.ui_scroll_to = function(){				var link = $('[data-scrollto]');		link.on('click', function(e){			e.preventDefault();			// Get Scroll To Section ID			var scroll_to = $(this).attr('data-scrollto');			// If Scroll_To Section Exist On Page			if ($('#' + scroll_to + '.section').length > 0 && scroll_to !== undefined) {				var pos = $('#' + scroll_to).offset().top;				//Scroll To Section				$('html, body').animate({					scrollTop: pos				}, 500, function() {					window.location.hash = scroll_to;				});			}		});	};		// Accordion	$.fn.ui_accordion = function() {		var el = this;		var accordion = el.find('.ui-accordion');		var accordion_toggle = el.find('.toggle');		var accordion_body = el.find('.body');		// Show First Accordion Child		accordion.first().addClass('active');		accordion_body.first().css('display', 'block');		// Accordion Toggle		accordion_toggle.on('click', function(e) {			e.preventDefault();			// Get The Target			var toggle = $(this).data('toggle');			var target = $('.body[data-accord="' + toggle + '"]');			// Show Selected Accordion			$(this).closest('.ui-accordion').addClass('active');			target.slideDown(250);			target.children().animate({				'opacity': 1			}, 750);			// Hide The Not Selected			accordion_body.not(target).closest('.ui-accordion').removeClass('active');			accordion_body.not(target).slideUp(250);			accordion_body.not(target).children().animate({				'opacity': 0			}, 150);		});	};			// Modal	$.fn.modal = function(){		doc.on('click', '[data-close="modal"]', function(){			var m = $(this).closest('.modal');			closeModal(m);		});				doc.on('click', '.modal', function(e){		  	if(e.target === this){				closeModal($(this));			}		});		function closeModal(m){			body.removeClass('modal-open');			m.fadeOut(250, function(){				doc.trigger('modal-hidden');			});		}		return {			show: function(modal){				modal.fadeIn(250);				body.addClass('modal-open');			},			hide: function(modal){				closeModal(modal);			}		};	};	var ui_modal = doc.modal();			// Video Player	$.fn.ui_video_player = function(){		// Video Modal HTML		var video_modal = $('<div class="video-modal modal" role="dialog"><div class="dialog container"><a class="close" data-close="modal" aria-hidden="true">Ã—</a><div class="video-player"></div></div></div>');		var toggle = this;		// Toggle Click Function		toggle.on('click', function(){			var youtube_id = $(this).data('video');			body.append(video_modal);			$('.video-modal').find('.video-player').html('<div class="video-player"><iframe src="https://www.youtube-nocookie.com/embed/' + youtube_id + '?rel=0&amp;showinfo=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe></div>');			ui_modal.show($('.video-modal'));		});		doc.on('modal-hidden', function(){			$('.video-modal').remove();		});	};		// Instagram Feed	$.fn.ui_instagram_feed = function() {		var valid = true;		var gram = this;		var auth_token = gram.data('authtoken');		var user_id = gram.data('userid');		var max_items = gram.data('items');		if(auth_token === 'YOUR_AUTH_TOKEN' || auth_token.length === 0){			console.error('Instgram Widget: - You need to place your auth token in the widget\'s "data-authtoken" attribute.');			valid = false;		}		if(user_id === 'YOUR_USER_ID' || user_id.length === 0){			console.error('Instgram Widget: - You need to place your user id in the widget\'s "data-userid" attribute .');			valid = false;		}		if(valid){			$.ajax({				url: 'https://api.instagram.com/v1/users/' + user_id + '/media/recent',				dataType: 'jsonp',				type: 'GET',				data: {					access_token: auth_token,					count: max_items				},				success: function(data) {					var x;					for (x in data.data) {						gram.append('<a href="' + data.data[x].link + '"><img src="' + data.data[x].images.standard_resolution.url + '"></a>');					}				},				error: function(data) {					console.error(data);				}			});		}	};				/* Collapsible Nav	 * Menu Tree For Categories */	$.fn.ui_collapsible_nav = function() {		var cnav_toggle = this.find('a.toggle');		var collapsible = {			show: function(e) { e.slideDown(250); },			hide: function(e) { e.slideUp(250); }		};		cnav_toggle.on('click', function(e){			e.preventDefault();			var a = $(this);			var ul = a.next();			var sibs = a.parent().siblings();			var sibs_togg = sibs.children('.toggle');			if(!a.hasClass('active')){				if(sibs_togg.length){					sibs_togg.removeClass('active');					collapsible.hide(sibs_togg.next('ul'));				}				collapsible.show(ul);				a.addClass('active');			}			else{				collapsible.hide(ul);				a.removeClass('active');			}		});		cnav_toggle.each(function(){			var togg = $(this);			if(togg.hasClass('active')){				collapsible.show(togg.next('ul'));				}			else{				collapsible.hide(togg.next('ul'));				}		});	};		// Cover Images	$.fn.ui_cover_image = function() {		var z = this;		function cover(img){			var parent = img.parent();			var iw = img.width(), ih = img.height(), pw = parent.width() , ph = parent.height(); 			var p_ratio = ph / pw;			var i_ratio = ih / iw;			console.log('p-ratio : ' + p_ratio);			console.log('i-ratio : ' + i_ratio);			if(i_ratio > p_ratio){				img.css({					'height': 'auto',					'width': pw + 'px',					'margin-top': (ph - ih) / 2 + 'px',					'margin-left': 'auto'				});			}			else{				img.css({					'height': ph + 'px',					'width': 'auto',					'margin-top': 'auto',					'margin-left': (pw - iw) / 2 + 'px'				});			}		}		// Window Resize		win.on('resize', function(){			z.each(function() {				cover($(this));			});		});	};		// Check if element is in viewport	$.fn.isOnScreen = function() {		var viewport = {			top: win.scrollTop()		};		viewport.bottom = viewport.top + win.height();		var bounds = this.offset();		bounds.bottom = bounds.top + this.outerHeight();		return (!(viewport.bottom < (bounds.top + 200) || viewport.top > (bounds.bottom + 60)));	};		// Load Images By Screen Density	$.fn.ui_uhd_images = function() {		var img = this;		var total = img.length;		var loaded = 0;		if (window.devicePixelRatio >= 1.25) {			setUHDImage(img);		}		function setUHDImage(images) {			images.each(function() {				loaded++;				var this_img = $(this);				var img_src = this_img.attr('src');				var img_type = img_src.split('.').pop();				var retina_img = img_src.replace('.'+img_type, '@2x.'+img_type);				this_img.attr('src', retina_img);				if (loaded >= total) {					setTimeout(function(){						doc.trigger('images_did_load');					},500);					console.log('@2x Images Did Load');				}			});		}	};	load_bg_images();	function load_bg_images(){		var images = doc.find('[data-bg]');		var uhd = doc.find('[data-uhd][data-bg]');		if(window.devicePixelRatio >= 1.25){			uhd.each(function() {				var this_img = $(this);				var img_src = this_img.attr('data-bg');				var img_type = img_src.split('.').pop();				var retina_img = img_src.replace('.'+img_type, '@2x.'+img_type);				this_img.css({					"background-image": "url('"+retina_img+"')"				});			});		}		else{			images.each(function() {				var this_img = $(this);				var img_src = this_img.attr('data-bg');				this_img.css({					"background-image": "url('"+img_src+"')"				});			});		}	}	images_loaded();	function images_loaded() {		var images = doc.find('img');		var total = images.length;		var loaded = 0;		var dummy = $('<img/>');				images.each(function() {			var img_src = $(this).attr('src');			dummy.attr('src', img_src).on('load', function() {				loaded++;				if (loaded >= total) {					setTimeout(function(){						doc.trigger('images_did_load');					},500);					console.log('Images Did Load');				}			});		});	}		// Actions Cards	$.fn.ui_action_card = function() {		var card = this;		card.on('click', function(){			window.location.href = $(this).data('target');		});	};			// Fade Elements When In ViewPort	$('[data-show]').each(function() {		$(this).css({'opacity':0});	});	win.scroll(function() {		$('[data-show]').not('.animated').each(function() {			var el = $(this);			var show_animation = $(this).attr('data-show');			var animation_delay = $(this).attr('data-delay');			if (el.isOnScreen()) {				if(!animation_delay){					el.addClass(show_animation);				}				else{					setTimeout(function(){						el.addClass(show_animation);					},animation_delay);				}				el.addClass('animated');			}		});	});	}(jQuery));